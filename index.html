<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expanded Hindi BPE Tokenizer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f9f9f9;
        }

        h1 {
            color: #333;
            text-align: center;
        }

        p {
            text-align: center;
            color: #555;
        }

        textarea {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 10px 0;
            box-sizing: border-box;
            /* Ensures padding doesn't affect width */
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 10px auto;
        }

        button:hover {
            background-color: #45a049;
        }

        #output {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            min-height: 50px;
        }

        .token {
            display: inline-block;
            padding: 5px 10px;
            margin: 3px;
            background-color: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 3px;
        }

        h3 {
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }

        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>

<body>
    <h1>Hindi BPE Tokenizer</h1>
    <p><strong>Language:</strong> Hindi (Devanagari Script)</p>

    <textarea id="input" rows="4"
        placeholder="Enter Hindi text here...">मैं स्नेहाशीष हूं और मैंने इस प्रोजेक्ट को एनएलपी असाइनमेंट 1 के हिस्से के रूप में बनाया है।</textarea>
    <br>
    <button onclick="tokenize()">Tokenize</button>

    <div id="output"></div>

    <script>
        // BPE Tokenizer Implementation from Scratch
        class BPETokenizer {
            constructor() {
                // Expanded sample corpus for training BPE
                this.corpus = [
                    "मेरा नाम राम है",
                    "मेरा घर दिल्ली में है",
                    "भारत मेरा देश है",
                    "हमारा देश महान है",
                    "मैं स्कूल जाता हूं",
                    "वह पढ़ाई करती है",
                    "बच्चे खेल रहे हैं",
                    "आज मौसम अच्छा है",
                    "कल बारिश होगी",
                    "सुबह जल्दी उठना चाहिए",
                    "रात में जल्दी सोना चाहिए",
                    "खाना खाने के बाद पानी पीना चाहिए",
                    "फल और सब्जी स्वास्थ्य के लिए अच्छे हैं",
                    "पुस्तक पढ़ना अच्छी आदत है",
                    "उषा एक अच्छी लड़की है",
                    "राम और सीता भाई बहन हैं",
                    "कृष्ण भगवान हैं",
                    "गीता एक पवित्र पुस्तक है",
                    "योग स्वास्थ्य के लिए लाभदायक है",
                    "भारतीय संस्कृति बहुत पुरानी है",
                    "नमस्ते, आप कैसे हैं?",
                    "आपका स्वागत है।",
                    "धन्यवाद, मैं ठीक हूँ।",
                    "शुभ प्रभात और शुभ रात्रि।",
                    "मुझे भारतीय खाना बहुत पसंद है।",
                    "क्या आप चाय या कॉफ़ी लेंगे?",
                    "पानी जीवन के लिए आवश्यक है।",
                    "ताजमहल आगरा में स्थित एक सुंदर स्मारक है।",
                    "मुंबई भारत का वित्तीय केंद्र है।",
                    "मैं अगले महीने नेपाल जाऊँगा।",
                    "वह एक कुशल सॉफ्टवेयर इंजीनियर है।",
                    "शिक्षा ही सफलता की असली कुंजी है।",
                    "विश्वविद्यालय में कई नए पाठ्यक्रम उपलब्ध हैं।",
                    "प्रकृति की सुंदरता अद्भुत और मनमोहक होती है।",
                    "हमें अपने पर्यावरण की रक्षा करनी चाहिए।",
                    "गंगा भारत की एक पवित्र नदी मानी जाती है।",
                    "कंप्यूटर ने हमारी दुनिया पूरी तरह बदल दी है।",
                    "आर्टिफिशियल इंटेलिजेंस भविष्य की तकनीक है।",
                    "इंटरनेट सूचना का एक विशाल और अंतहीन स्रोत है।",
                    "जैसा करोगे, वैसा भरोगे।",
                    "एकता में ही बल है।",
                    "सूर्य हमारे सौरमंडल का केंद्र है।",
                    "भारत १५ अगस्त १९४७ को आज़ाद हुआ था।",
                    "आपका नाम क्या है और आप कहाँ रहते हैं?",
                    "यह काम कैसे करना है?",
                    "बाजार में सब्जियों के दाम बढ़ गए हैं।",
                    "मेरे पिताजी एक डॉक्टर हैं और मेरी माताजी एक शिक्षिका हैं।",
                    "विज्ञान और प्रौद्योगिकी तेजी से प्रगति कर रहे हैं।",
                    "डिजिटल भुगतान करना अब बहुत आसान हो गया है।",
                    "स्वच्छ भारत अभियान एक महत्वपूर्ण पहल है।",
                    "शेर जंगल का राजा कहलाता है।",
                    "हिमालय पर्वत दुनिया का सबसे ऊँचा पर्वत है।",
                    "क्रिकेट भारत में सबसे लोकप्रिय खेल है।",
                    "संगीत सुनने से मन को शांति मिलती है।",
                    "वह बहुत मेहनती और ईमानदार व्यक्ति है।",
                    "हमें यातायात के नियमों का पालन करना चाहिए।",
                    "त्योहारों के समय बाजार में बहुत भीड़ होती है।",
                    "नई दिल्ली भारत की राजधानी है।",
                    "किसान देश के लिए अनाज उगाते हैं।",
                    "स्वास्थ्य ही सबसे बड़ा धन है।",
                    "समय किसी के लिए नहीं रुकता।",
                    "हमें अपने बड़ों का सम्मान करना चाहिए।",
                    "जो मेहनत करता है, वह सफल होता है।",
                    "अगर तुम आओगे, तो मैं तुम्हारी मदद करूँगा।",
                    "यह किताब बहुत दिलचस्प है।",
                    "मैं हिंदी भाषा सीख रहा हूँ।",
                    "आज का तापमान कितना है?",
                    "कृपया दरवाजा बंद कर दीजिए।",
                    "मुझे आपकी मदद की ज़रूरत है।",
                    "ग्लोबल वार्मिंग एक गंभीर समस्या है।",
                    "चंद्रमा पृथ्वी का एकमात्र प्राकृतिक उपग्रह है।",
                    "आपसे मिलकर बहुत खुशी हुई।",
                    "यह ट्रेन मुंबई सेंट्रल तक जाएगी।",
                    "बच्चों को पौष्टिक आहार देना चाहिए।",
                    "योग और ध्यान मानसिक स्वास्थ्य के लिए अच्छे हैं।",
                    "भारतीय अर्थव्यवस्था तेजी से बढ़ रही है।",
                    "उसने अपनी गलती स्वीकार कर ली।",
                    "यह फिल्म बहुत मनोरंजक थी।",
                    "साइकिल चलाना एक अच्छा व्यायाम है।",
                    "क्या मैं अंदर आ सकता हूँ?",
                    "परिश्रम का फल मीठा होता है।",
                    "ज्ञान शक्ति है।",
                    "अंतरिक्ष में अनगिनत तारे हैं।",
                    "मुझे एक गिलास पानी दीजिए।",
                    "आपकी यात्रा मंगलमय हो।",
                    "भारत एक विविधतापूर्ण देश है।",
                    "उसकी आवाज बहुत मधुर है।",
                    "हमें हमेशा सच बोलना चाहिए।",
                    "इंटरनेट के फायदे और नुकसान दोनों हैं।",
                    "वह धाराप्रवाह अंग्रेजी बोल सकती है।",
                    "पौधे हमें ऑक्सीजन प्रदान करते हैं।",
                    "जीवन में अनुशासन का बहुत महत्व है।",
                    "महात्मा गांधी को राष्ट्रपिता कहा जाता है।",
                    "मैं आज बहुत खुश हूँ।",
                    "वह एक प्रतिभाशाली चित्रकार है।",
                    "मुझे बागवानी करने का बहुत शौक है।",
                    "वसंत ऋतु में चारों ओर फूल खिलते हैं।",
                    "कल रात बहुत तेज आंधी आई थी।",
                    "स्मार्टफोन हमारे जीवन का एक अभिन्न हिस्सा बन गया है।",
                    "वह अक्सर ऑनलाइन शॉपिंग करती है।",
                    "मेरी माँ बहुत स्वादिष्ट खाना बनाती हैं।",
                    "सिंधु घाटी सभ्यता विश्व की प्राचीनतम सभ्यताओं में से एक थी।",
                    "होली को रंगों का त्योहार भी कहा जाता है।",
                    "परीक्षा की तैयारी के लिए उसने दिन-रात एक कर दिया।",
                    "गणित मेरा सबसे पसंदीदा विषय है।",
                    "नियमित रूप से व्यायाम करना शरीर को स्वस्थ रखता है।",
                    "एक संतुलित आहार लेना बहुत आवश्यक है।",
                    "हम पिछली गर्मियों में शिमला घूमने गए थे।",
                    "रेल यात्रा का अपना एक अलग ही मज़ा है।",
                    "ईमानदारी सबसे अच्छी और सर्वोत्तम नीति है।",
                    "सच्ची और अच्छी दोस्ती बहुत अनमोल होती है।",
                    "कृपया यहाँ धूम्रपान न करें।",
                    "उसने मुझे अपनी जन्मदिन की पार्टी में आमंत्रित किया है।",
                    "सड़क पर गाड़ी चलाते समय सावधान रहना चाहिए।",
                    "प्रदूषण एक वैश्विक चिंता का विषय है।",
                    "हमें पानी की हर बूँद बचानी चाहिए।",
                    "मैंने अपनी सारी किताबें अलमारी में रख दी हैं।",
                    "क्या आप मेरी कलम खोजने में मदद कर सकते हैं?",
                    "आज कार्यालय में बहुत काम था।",
                    "वह अपनी कक्षा में हमेशा प्रथम आती है।",
                    "सौर ऊर्जा एक स्वच्छ ऊर्जा स्रोत है।",
                    "गाँव का जीवन शहर के जीवन से बहुत अलग होता है।",
                    "इस समस्या का समाधान क्या हो सकता है?",
                    "वह हमेशा दूसरों की मदद करने के लिए तैयार रहता है।",
                    "मैंने यह कहानी अपनी दादी से सुनी थी।",
                    "हवाई जहाज आसमान में उड़ रहा है।",
                    "मेरे घर के पास एक बड़ा बगीचा है।",
                    "वह संगीत की शिक्षा ले रही है।",
                    "कृपया लाइन में खड़े रहें।",
                    "आज रात आसमान में चाँद बहुत सुंदर दिख रहा है।",
                    "मेरे दोस्त ने मुझे एक सुंदर उपहार दिया।",
                    "भारत में कई भाषाएँ और बोलियाँ बोली जाती हैं।",
                    "सफलता के लिए आत्मविश्वास बहुत ज़रूरी है।",
                    "उसने अपनी पढ़ाई पूरी करने के लिए बहुत संघर्ष किया।",
                    "गर्मियों में ठंडे पेय पीना अच्छा लगता है।",
                    "जंगल में कई जंगली जानवर रहते हैं।",
                    "पृथ्वी सूर्य के चारों ओर घूमती है।",
                    "मैं कल अपने पुराने दोस्तों से मिला।",
                    "इस नदी का पानी बहुत साफ है।",
                    "उसने मुझे बिना किसी कारण के डांटा।",
                    "मैं इस शहर में नया हूँ।",
                    "क्या आप मुझे स्टेशन का रास्ता बता सकते हैं?",
                    "उसकी लिखावट बहुत सुंदर है।",
                    "हमें अपने सपनों को पूरा करने के लिए कड़ी मेहनत करनी चाहिए।",
                    "इस इमारत का निर्माण पिछले साल हुआ था।",
                    "वह बहुत अच्छा शतरंज खेलता है।",
                    "सुबह की सैर स्वास्थ्य के लिए फायदेमंद होती है।",
                    "मैंने आज एक नई भाषा सीखनी शुरू की है।",
                    "लोकतंत्र में जनता का शासन होता है।",
                    "वह एक प्रसिद्ध वैज्ञानिक बनना चाहता है।",
                    "त्योहार हमें एक साथ लाते हैं।",
                    "मैंने पुस्तकालय से कुछ किताबें उधार ली हैं।",
                    "वह सुबह पाँच बजे उठता है।",
                    "बाढ़ के कारण कई गाँव डूब गए।",
                    "कृपया शांति बनाए रखें।",
                    "यह समाचार सुनकर सभी हैरान रह गए।",
                    "वह अपने माता-पिता का बहुत आदर करता है।",
                    "आग से खेलना खतरनाक हो सकता है।",
                    "उसने अपनी कार की चाबी खो दी है।",
                    "पक्षी सुबह-सुबह चहचहा रहे हैं।",
                    "इस मिठाई का स्वाद बहुत अच्छा है।",
                    "वह अपनी जिम्मेदारियों को अच्छी तरह समझता है।",
                    "आज का अखबार कहाँ है?",
                    "तकनीक ने संचार को बहुत आसान बना दिया है।",
                    "उसने दौड़ में पहला स्थान प्राप्त किया।",
                    "बादल गरज रहे हैं, शायद बारिश होगी।",
                    "इस गाँव में बिजली की सुविधा नहीं है।",
                    "शिक्षा हमें एक बेहतर इंसान बनाती है।",
                    "उसने बिना सोचे-समझे फैसला ले लिया।",
                    "पहाड़ की चोटी से दृश्य अद्भुत था।",
                    "वह कहानी सुनाने में बहुत माहिर है।",
                    "हमें प्लास्टिक का उपयोग कम करना चाहिए।",
                    "उसने एक नया व्यवसाय शुरू किया है।",
                    "बच्चों को मोबाइल फोन से दूर रखना चाहिए।",
                    "मेरे सिर में हल्का दर्द हो रहा है।",
                    "चलो बाहर चलकर कुछ खाते हैं।",
                    "उसकी बातों में सच्चाई झलकती है।",
                    "यह किला बहुत पुराना और ऐतिहासिक है।",
                    "समय का सदुपयोग करना सीखो।",
                    "मैं तुम्हारे निर्णय का सम्मान करता हूँ।",
                    "उसे तैरना नहीं आता।",
                    "यह जानकारी पूरी तरह से गोपनीय है।",
                    "उसने अपनी नौकरी से इस्तीफा दे दिया।",
                    "हम सब मिलकर इस काम को पूरा कर सकते हैं।",
                    "आज मौसम बहुत सुहावना है।",
                    "उसकी कला की सबने प्रशंसा की।",
                    "अच्छे संस्कार परिवार से ही मिलते हैं।",
                    "कृपया अपनी बारी का इंतजार करें।",
                    "उसने मुझे अपनी सफलता का रहस्य बताया।",
                    "इस शहर की सड़कें काफी चौड़ी हैं।"
                ];

                this.vocab = new Set();
                this.merges = [];
                this.trainBPE(200); // Increased merges for larger corpus
            }

            // Get character-level tokens from text
            getInitialTokens(text) {
                const tokens = [];
                for (let char of text) {
                    tokens.push(char);
                    this.vocab.add(char);
                }
                return tokens;
            }

            // Count pairs in tokenized corpus
            countPairs(tokenizedCorpus) {
                const pairCounts = new Map();

                for (let tokens of tokenizedCorpus) {
                    for (let i = 0; i < tokens.length - 1; i++) {
                        const pair = tokens[i] + '||' + tokens[i + 1];
                        pairCounts.set(pair, (pairCounts.get(pair) || 0) + 1);
                    }
                }

                return pairCounts;
            }

            // Merge tokens based on pair
            mergeTokens(tokens, pair) {
                const [first, second] = pair.split('||');
                const newTokens = [];
                let i = 0;

                while (i < tokens.length) {
                    if (i < tokens.length - 1 && tokens[i] === first && tokens[i + 1] === second) {
                        newTokens.push(first + second);
                        i += 2;
                    } else {
                        newTokens.push(tokens[i]);
                        i += 1;
                    }
                }

                return newTokens;
            }

            // Train BPE on corpus
            trainBPE(numMerges) {
                // Initialize with character-level tokens
                let tokenizedCorpus = this.corpus.map(text => this.getInitialTokens(text));

                for (let iter = 0; iter < numMerges; iter++) {
                    // Count all pairs
                    const pairCounts = this.countPairs(tokenizedCorpus);

                    if (pairCounts.size === 0) break;

                    // Find most frequent pair
                    let maxPair = null;
                    let maxCount = 0;

                    for (let [pair, count] of pairCounts) {
                        if (count > maxCount) {
                            maxCount = count;
                            maxPair = pair;
                        }
                    }

                    if (!maxPair) break;

                    // Add merge rule
                    this.merges.push(maxPair);
                    const [first, second] = maxPair.split('||');
                    this.vocab.add(first + second);

                    // Apply merge to corpus
                    tokenizedCorpus = tokenizedCorpus.map(tokens =>
                        this.mergeTokens(tokens, maxPair)
                    );
                }
            }

            // Tokenize new text using learned merges
            tokenize(text) {
                // Start with character-level tokens
                let tokens = [];
                for (let char of text) {
                    tokens.push(char);
                }

                // Apply merges in order
                for (let merge of this.merges) {
                    tokens = this.mergeTokens(tokens, merge);
                }

                return tokens;
            }
        }

        // Initialize tokenizer
        const tokenizer = new BPETokenizer();

        function tokenize() {
            const input = document.getElementById('input').value;
            const output = document.getElementById('output');

            if (!input.trim()) {
                output.innerHTML = '<p>Please enter some text.</p>';
                return;
            }

            const tokens = tokenizer.tokenize(input);

            // Display tokens
            let htmlContent = '<h3>Tokens (' + tokens.length + '):</h3>';
            tokens.forEach(token => {
                const displayToken = token === ' ' ? '␣' : token;
                htmlContent += `<span class="token">${displayToken}</span>`;
            });

            // Also show as array
            htmlContent += '<h3>Token Array:</h3>';
            htmlContent += '<pre>' + JSON.stringify(tokens, null, 2) + '</pre>';

            output.innerHTML = htmlContent;
        }

        // Automatically tokenize the default text on page load
        window.onload = tokenize;
    </script>
</body>

</html>